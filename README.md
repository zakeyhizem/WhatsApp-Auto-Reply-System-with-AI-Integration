# مشروع WhatsAap — رد آلي عبر واتساب مدمج بالذكاء الاصطناعي

وصف موجز

هذا المشروع هو نظام رد آلي عبر WhatsApp مدمج مع قدرات الذكاء الاصطناعي. الواجهة مبنية بـ React + Vite، والخادم بـ Node.js وExpress. يستخدم المشروع مكتبة `whatsapp-web.js` للتكامل مع WhatsApp، وملف `ai.js` مع إعدادات في `backend/aiSettings.js` لتوليد ردود ذكية (مثلاً باستخدام مزودي نماذج مثل OpenAI).

الوظيفة الأساسية

- استقبال الرسائل من مستخدمي WhatsApp.
- تحليل الرسائل وإرسال استعلامات إلى نموذج ذكاء اصطناعي للحصول على ردود (مثل ChatGPT أو مزود آخر).
- إعادة إرسال الردود تلقائيًا عبر حساب WhatsApp المرتبط.
- واجهة إدارة لضبط إعدادات المساعد الذكي، قوالب الاستجابة، وسجلات الأخطاء.

ملفات رئيسية متعلقة بالذكاء الاصطناعي

- `ai.js` — دوال وواجهة اتصال بمزود الذكاء الاصطناعي (مثال: `getAIReply`).
- `backend/aiSettings.js` — تحميل/حفظ إعدادات الذكاء الاصطناعي (مفاتيح API، الموفر، النموذج، وسلوك التوليد).
- `imageRequestHandler.js` — مثال لتكامل الصور مع الاستدعاءات الذكية.

المتطلبات

- Node.js (يفضّل الإصدار 18+)
- npm
- (اختياري) MySQL إذا أردت تخزين الإعدادات والمستخدمين

متغيرات البيئة المقترحة

ضع ملف `.env` في جذر المشروع بالقيم المناسبة. المتغيرات المقترحة:

```
PORT=3000
MYSQL_HOST=localhost
MYSQL_USER=your_db_user
MYSQL_PASSWORD=your_db_password
MYSQL_DATABASE=your_db_name
JWT_SECRET=your_jwt_secret
WHATSAPP_SESSION_DIR=./sessions
NODE_ENV=development

# متغيرات الذكاء الاصطناعي (مثال عند استخدام OpenAI)
OPENAI_API_KEY=your_openai_api_key
AI_PROVIDER=openai
AI_MODEL=gpt-4o-mini
```

ملاحظة: راجع `backend/aiSettings.js` و`ai.js` للتأكد من أسماء المتغيرات وطريقة التحميل المستخدمة في المشروع.

التثبيت

```powershell
# من جذر المشروع
npm install
```

تشغيل المشروع أثناء التطوير

1) شغّل واجهة Vite:

```powershell
npm run dev
```

2) في نافذة طرفية ثانية شغّل الخادم:

```powershell
npm run server
# أو
npm start
```

بعد تعيين متغير `OPENAI_API_KEY` أو أي مفتاح مزود AI آخر، ستعمل ميزة الردود الذكية تلقائيًا عند استدعائها من الكود.

بناء ونشر

```powershell
npm run build
npm start
```

ملاحظات تشغيلية وفنية

- جلسات WhatsApp: يتم حفظ جلسات `whatsapp-web.js` عادة في مجلد جلسات (`WHATSAPP_SESSION_DIR`)، فتأكد من صلاحيات الكتابة لهذا المسار.
- اعتماد AI: عند استخدام OpenAI تأكد من وجود مفتاح صالح وقيود الاستخدام. يمكن ضبط خصائص التوليد (model, temperature, max_tokens) في `backend/aiSettings.js`.
- الأمان: لا ترفع مفاتيح API أو `.env` للمستودع العام. فعل ميزات الأمان المضمّنة (`helmet`, `cors`, `express-rate-limit`) عند النشر.

هيكلة المشروع (موجز)

- `backend/` — منطق الخادم، إعدادات AI، التعامل مع قاعدة البيانات.
- `routes/` — مسارات Express (بما فيها `routes/aiSettingsRoutes.js`).
- `src/` — واجهة React (تحتوي على صفحة إعدادات المساعد الذكي `AIAssistantSettings.jsx`).
- `ai.js` — ملف الواجهات الذكية في جذر المشروع.
- `imageRequestHandler.js` — مثال لطلب معالجة/توليد عبر AI.

اقتراحات قبل رفع المشروع إلى GitHub

- أضف `.gitignore` لاستبعاد `node_modules/`, ملفات الجلسات، و`.env`.
- أضف `LICENSE` إذا أردت ترخيصًا مفتوحًا.
- أنشئ `env.example` يوضّح المتغيرات دون مفاتيح حسّاسة.

كيفية المساهمة

- افتح Issue أو أنشئ فرعًا باسم `feature/` أو `fix/`، ثم قدّم Pull Request مع وصف التغييرات واختبارات إن وُجدت.

تعديلات إضافية أستطيع مساعدتك بها

- إنشاء ملف `env.example` بناءً على المتغيرات المقترحة.
- إضافة مثال عملي لاستدعاء OpenAI داخل `ai.js` (إذا رغبت).
- إنشاء `.gitignore` تلقائي إن لم يكن موجودًا.

أخبرني ماذا تريد أن أضيف بعد ذلك وسأطبّق التعديلات مباشرةً.
# مشروع WhatsAap (واجهة إدارة WhatsApp)

مقدمة

هذا المشروع عبارة عن لوحة إدارة وتكامل مع WhatsApp مبنية بـ Node.js (Express) في الـ backend و React + Vite في الواجهة الأمامية. يحتوي المشروع على ميزات لإدارة الأرقام، الرسائل المجدولة، القوالب، التقارير، عمليات الدفع/الاشتراكات، وواجهات برمجية (APIs) للمستخدمين والإداريين.

الميزات الرئيسية

- واجهة أمامية مبنية بـ React + Vite.
- خادم Node.js/Express يتضمن مسارات لإدارة الأرقام، الرسائل، القوالب، التقارير، والاشتراكات.
- تكامل مع whatsapp-web.js لإرسال/استقبال الرسائل وإدارة جلسات QR.
- دعم رفع الصور والملفات (Multer) وتوليد ملفات PDF (`pdfkit`).
- وظائف مجدولة باستخدام `node-cron` (مثلاً للرسائل المجدولة أو المهام المتعلقة بالاشتراكات).
- قواعد بيانات محتملة عبر MySQL (`mysql2`).

المتطلبات

- Node.js (موصى به: 18+)
- npm
- قاعدة بيانات MySQL (إن رغبت باستخدام التخزين المحلي للبيانات)

ملاحظة: تم العثور على كل سكربتات المشروع وملف `package.json` في جذر المستودع؛ يتم تشغيل الخادم والواجهة من نفس الحزمة.

التثبيت (PowerShell)

```powershell
# من جذر المشروع
npm install
```

إعداد متغيرات البيئة (مقترح)

ضع ملف `.env` في جذر المشروع يحتوي على المتغيرات التالية (هذه قائمة افتراضية مستنتَجة؛ راجع ملفات التطبيق الفعلية إن وُجدت لتحقيق الدقة):

- PORT=3000
- MYSQL_HOST=localhost
- MYSQL_USER=your_db_user
- MYSQL_PASSWORD=your_db_password
- MYSQL_DATABASE=your_db_name
- JWT_SECRET=secret_key
- WHATSAPP_SESSION_DIR=./sessions
- NODE_ENV=development

ملاحظة: هذه مفاتيح مقترحة — راجع `backend/` وملفات الإعداد الأخرى لتأكيد المتغيرات الدقيقة.

تشغيل المشروع (التطوير)

يفضل تشغيل الواجهة والخادم في نافذتين منفصلتين أثناء التطوير:

Terminal 1 — تشغيل الواجهة (Vite dev server):

```powershell
npm run dev
```

Terminal 2 — تشغيل الخادم (backend):

```powershell
npm run server
# أو
npm start
```

- الأمر `npm run dev` يقوم بتشغيل Vite للواجهة الأمامية.
- الأمر `npm run server` (أو `npm start`) يقوم بتشغيل `backend.js`، وهو الخادم الذي يخدم الـ APIs وربما الملفات الثابتة بعد البناء.

التحزيم والنشر

لبناء الواجهة ثم تشغيل الخادم في وضع الإنتاج:

```powershell
npm run build
npm run start
```

ملحوظة: في `package.json` توجد سكربتات إضافية مفيدة مثل:

- `dev` — تشغيل Vite
- `build` — بناء الواجهة
- `server` — تشغيل `backend.js`
- `start` — يقوم بتشغيل الخادم (يستدعي `npm run server`)
- سكربتات للاختبارات المحلية والمهام المتعلقة بالاشتراكات/migrations

هيكلة المشروع (مختصر)

- `backend/` — ملفات منطق الخادم (routes, controllers, db, utils)
- `routes/` — تعريف مسارات Express مفصلة (قسّمت بحسب الميزات)
- `src/` — كود الواجهة الأمامية (React)
- `public/` — ملفات ثابتة وملفات توثيق API
- `services/` — خدمات تعمل في الخلفية (مثلاً مراقبة الاشتراكات)
- `scripts/` — سكربتات مساعدة (مهاجرات، اختبارات)
- `uploads/` — ملفات مرفوعة
- ملفات جذرية مهمة: `backend.js`, `package.json`, `vite.config.js`، إلخ.

ملاحظات تشغيلية وفنية

- قاعدة البيانات: إذا اخترت استخدام MySQL، تأكد من إنشاء قاعدة البيانات وإعداد بيانات الاعتماد في `.env`، وربما تشغيل أي سكربتات `scripts/` للمهاجَرات.
- جلسات WhatsApp: `whatsapp-web.js` ينشئ جلسات تحتاج لحفظ (عادةً في ملف أو مجلد جلسات). تأكد من منح المسار الصحيح في إعدادات المشروع أو متغير البيئة.
- الأمان: في بيئة الإنتاج، قم بإعداد `helmet`, `cors`, ومحدّدات معدّل الطلب (`express-rate-limit`) كما هو مُضمّن بالمشروع.

افتراضات

1. `backend.js` يقوم أيضاً بخدمة الملفات الثابتة (الواجهة) بعد تشغيل `npm run build` — إن لم يكن، قد تحتاج إلى إعداد طريقة لنشر الواجهة إلى خادم ثابت أو ضبط إعدادات الخادم.
2. أسماء متغيرات البيئة المقترحة أعلاه قد تحتاج تعديلاً بناءً على قراءة أكواد `backend/` وملفات الإعداد.

كيفية المساهمة

- افتح issue أو انشاء فرع feature/bugfix من الفرع الرئيسي.
- اكتب كود نظيف، أضف اختبارًا إن أمكن، ثم قدم Pull Request مع وصف واضح للتغييرات.

قائمة تحقق قبل رفع المشروع على GitHub

- تأكد من عدم رفع أسرار أو ملفات `.env` إلى المستودع.
- إضافة ملف `.gitignore` (إذا لم يكن موجودًا) لاستثناء `node_modules`, ملفات الجلسات، وملفات البيئة.
- فكّر بإضافة ملف `LICENSE` (مثل MIT) إذا كنت تريد ترخيصًا مفتوحًا.

تواصل

إذا أردت، أستطيع:

- تعديل هذا الملف ليشمل تفاصيل متغيرات البيئة الحقيقية بعد تزويدي بملفات الإعداد أو قراءة ملفات `backend/`.
- إضافة مثال `.env.example` أو سكربت إعداد قاعدة البيانات.

---

ملف README هذا أُنشئ بناءً على فحص ملفات المشروع المتوفرة (مثل `package.json`) وبنية المجلدات. إذا تريد نسخة مطوّرة أو مفصّلة أكثر (بما في ذلك متغيرات بيئة محددة أو تعليمات نشر في Heroku / Docker / VPS)، قل لي وسأعدها مباشرة.
تجربة المشروع من هاذا الرابط https://waai.online
